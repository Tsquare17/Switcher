var Switcher=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function r(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t,n){o(e,t),t.set(e,n)}function c(e,t){o(e,t),t.add(e)}var u=new WeakMap,s=new WeakSet,l=new WeakSet,h=function(){function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,n),c(this,l),c(this,s),a(this,u,{writable:!0,value:"XhrSwitcher"}),this.containerSelector=t,this.linkSelector=r,this.debugging=i}var r,o,h;return r=n,(o=[{key:"init",value:function(){var e=this;this.container=i(this,l,w).call(this,this.containerSelector),document.querySelector("body").addEventListener("click",(function(t){t.target.matches(e.linkSelector)&&(t.preventDefault(),i(e,s,f).call(e,t))})),i(this,l,w).call(this,this.linkSelector)}}])&&t(r.prototype,o),h&&t(r,h),n}();function f(e){var t=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var i=(new DOMParser).parseFromString(n.responseText,"text/html"),o=i.querySelector(t.containerSelector).innerHTML,a=new CustomEvent("switcher.before",{detail:{event:e,content:o}});document.dispatchEvent(a),t.container.innerHTML=i.querySelector(t.containerSelector).innerHTML,r(h,h,v).call(h,e.target);var c=new CustomEvent("switcher.after");document.dispatchEvent(c)}},n.open("GET",e.target,!0),n.send()}function v(e){window.history.pushState(null,"",e)}function w(e){var t=document.querySelector(e);return null===t&&this.debugging&&console.log(n(this,u)+": No elements matching "+e+" were found"),t}return h}();
//# sourceMappingURL=Switcher.js.map
