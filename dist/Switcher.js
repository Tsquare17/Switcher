var Switcher=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(e,t,"get");return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function r(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(e,t,n){o(e,t),t.set(e,n)}function c(e,t){o(e,t),t.add(e)}var u=new WeakMap,s=new WeakSet,l=new WeakSet,h=new WeakSet,f=function(){function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,n),c(this,h),c(this,l),c(this,s),a(this,u,{writable:!0,value:"XhrSwitcher"}),this.containerSelector=t,this.linkSelector=r,this.debugging=i}var r,o,f;return r=n,(o=[{key:"init",value:function(){var e=this;this.container=i(this,h,p).call(this,this.containerSelector),document.querySelector("body").addEventListener("click",(function(t){t.target.matches(e.linkSelector)&&(t.preventDefault(),i(e,s,v).call(e,t))})),i(this,h,p).call(this,this.linkSelector)}}])&&t(r.prototype,o),f&&t(r,f),n}();function v(e){var t=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var o=i(t,l,w).call(t,n),a=o.querySelector(t.containerSelector).innerHTML,c=new CustomEvent("switcher.before",{detail:{event:e,content:a}});e.target.dispatchEvent(c),t.container.innerHTML=o.querySelector(t.containerSelector).innerHTML,r(f,f,g).call(f,e.target);var u=new CustomEvent("switcher.after");e.target.dispatchEvent(u)}},n.open("GET",e.target,!0),n.send()}function w(e){return(new DOMParser).parseFromString(e.responseText,"text/html")}function g(e){window.history.pushState(null,"",e)}function p(e){var t=document.querySelector(e);return null===t&&this.debugging&&console.log(n(this,u)+": No elements matching "+e+" were found"),t}return f}();
//# sourceMappingURL=Switcher.js.map
