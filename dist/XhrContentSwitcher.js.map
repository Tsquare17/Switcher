{"version":3,"file":"XhrContentSwitcher.js","sources":["../src/XhrContentSwitcher.js"],"sourcesContent":["export default class XhrContentSwitcher\n{\n    #className = 'XhrContentSwitcher';\n    #onSwitchCall = null;\n\n    constructor(containerSelector, linkSelector, debugging = false) {\n        this.containerSelector = containerSelector;\n        this.linkSelector = linkSelector;\n        this.debugging = debugging;\n    }\n\n    init() {\n        this.container = this.#getContainer(this.containerSelector);\n\n        document.addEventListener('DOMContentLoaded', () => {\n            document.querySelector('body').addEventListener('click', e => {\n                if (e.target.classList.contains(this.linkSelector.replace('.', ''))) {\n                    e.preventDefault();\n                    this.#replaceEvent(e);\n                }\n            });\n\n            this.#getElement(this.linkSelector);\n        });\n    }\n\n    onSwitch(call) {\n        this.#onSwitchCall = call;\n    }\n\n    #getContainer(el) {\n        return this.#getElement(el);\n    }\n\n    #replaceEvent(event) {\n        let xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = () => {\n            if (xhr.readyState === XMLHttpRequest.DONE) {\n                let parser = new DOMParser();\n                let doc = parser.parseFromString(xhr.responseText, 'text/html');\n                this.container.innerHTML = doc.querySelector(this.containerSelector).innerHTML;\n\n                this.#updateURL(event.target);\n\n                if (this.#onSwitchCall) {\n                    this.#onSwitchCall(event);\n                }\n            }\n        };\n\n        xhr.open('GET', event.target, true);\n        xhr.send();\n    }\n\n    #updateURL(location) {\n        window.history.pushState(null, '', location);\n    }\n\n    #getElement(selector) {\n        let el = document.querySelector(selector);\n\n        if (el === null && this.debugging) {\n            console.log(this.#className + ': No elements of the class ' + selector + ' were found');\n        }\n\n        return el;\n    }\n}\n"],"names":["XhrContentSwitcher","containerSelector","linkSelector","debugging","container","this","document","addEventListener","querySelector","e","target","classList","contains","_this","replace","preventDefault","call","el","event","xhr","XMLHttpRequest","onreadystatechange","readyState","DONE","doc","DOMParser","parseFromString","responseText","_this2","innerHTML","open","send","location","window","history","pushState","selector","console","log","_classPrivateFieldGet"],"mappings":"uoBAAqBA,wBAKLC,EAAmBC,OAAcC,kJAHhC,qDACG,YAGPF,kBAAoBA,OACpBC,aAAeA,OACfC,UAAYA,wEAIZC,YAAYC,eAAAA,KAAmBA,KAAKJ,mBAEzCK,SAASC,iBAAiB,oBAAoB,WAC1CD,SAASE,cAAc,QAAQD,iBAAiB,SAAS,SAAAE,GACjDA,EAAEC,OAAOC,UAAUC,SAASC,EAAKX,aAAaY,QAAQ,IAAK,OAC3DL,EAAEM,mBACFF,YAAAA,EAAmBJ,SAI3BI,YAAAA,EAAiBA,EAAKX,kDAIrBc,+OACgBA,mDAGXC,YACHZ,eAAAA,KAAiBY,eAGdC,cACNC,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,cACjBF,EAAIG,aAAeF,eAAeG,KAAM,KAEpCC,GADS,IAAIC,WACAC,gBAAgBP,EAAIQ,aAAc,aACnDC,EAAKxB,UAAUyB,UAAYL,EAAIhB,cAAcoB,EAAK3B,mBAAmB4B,YAErED,YAAAA,EAAgBV,EAAMR,UAElBkB,QACAA,UAAAA,EAAmBV,KAK/BC,EAAIW,KAAK,MAAOZ,EAAMR,QAAQ,GAC9BS,EAAIY,mBAGGC,GACPC,OAAOC,QAAQC,UAAU,KAAM,GAAIH,eAG3BI,OACJnB,EAAKX,SAASE,cAAc4B,UAErB,OAAPnB,GAAeZ,KAAKF,WACpBkC,QAAQC,IAAIC,UAAkB,8BAAgCH,EAAW,eAGtEnB"}