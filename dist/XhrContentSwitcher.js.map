{"version":3,"file":"XhrContentSwitcher.js","sources":["../src/XhrContentSwitcher.js"],"sourcesContent":["export default class XhrContentSwitcher\n{\n    #className = 'XhrContentSwitcher';\n    #onSwitchCall = null;\n\n    constructor(containerSelector, linkSelector, debugging = false) {\n        this.containerSelector = containerSelector;\n        this.linkSelector = linkSelector;\n        this.debugging = debugging;\n    }\n\n    init() {\n        this.container = this.#getElement(this.containerSelector);\n\n        document.querySelector('body').addEventListener('click', e => {\n            if (e.target.classList.contains(this.linkSelector.replace('.', ''))) {\n                e.preventDefault();\n                this.#replaceEvent(e);\n            }\n        });\n\n        this.#getElement(this.linkSelector);\n    }\n\n    onSwitch(call) {\n        this.#onSwitchCall = call;\n    }\n\n    #replaceEvent(event) {\n        let xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = () => {\n            if (xhr.readyState === XMLHttpRequest.DONE) {\n                let parser = new DOMParser();\n                let doc = parser.parseFromString(xhr.responseText, 'text/html');\n                this.container.innerHTML = doc.querySelector(this.containerSelector).innerHTML;\n\n                this.#updateURL(event.target);\n\n                if (this.#onSwitchCall) {\n                    this.#onSwitchCall(event);\n                }\n            }\n        };\n\n        xhr.open('GET', event.target, true);\n        xhr.send();\n    }\n\n    #updateURL(location) {\n        window.history.pushState(null, '', location);\n    }\n\n    #getElement(selector) {\n        let el = document.querySelector(selector);\n\n        if (el === null && this.debugging) {\n            console.log(this.#className + ': No elements matching ' + selector + ' were found');\n        }\n\n        return el;\n    }\n}\n"],"names":["XhrContentSwitcher","containerSelector","linkSelector","debugging","container","this","document","querySelector","addEventListener","e","target","classList","contains","_this","replace","preventDefault","call","event","xhr","XMLHttpRequest","onreadystatechange","readyState","DONE","doc","DOMParser","parseFromString","responseText","_this2","innerHTML","open","send","location","window","history","pushState","selector","el","console","log","_classPrivateFieldGet"],"mappings":"ynBAAqBA,wBAKLC,EAAmBC,OAAcC,sIAHhC,qDACG,YAGPF,kBAAoBA,OACpBC,aAAeA,OACfC,UAAYA,wEAIZC,YAAYC,eAAAA,KAAiBA,KAAKJ,mBAEvCK,SAASC,cAAc,QAAQC,iBAAiB,SAAS,SAAAC,GACjDA,EAAEC,OAAOC,UAAUC,SAASC,EAAKX,aAAaY,QAAQ,IAAK,OAC3DL,EAAEM,mBACFF,YAAAA,EAAmBJ,6BAIVJ,KAAKH,+CAGjBc,+OACgBA,mDAGXC,cACNC,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,cACjBF,EAAIG,aAAeF,eAAeG,KAAM,KAEpCC,GADS,IAAIC,WACAC,gBAAgBP,EAAIQ,aAAc,aACnDC,EAAKvB,UAAUwB,UAAYL,EAAIhB,cAAcoB,EAAK1B,mBAAmB2B,YAErED,YAAAA,EAAgBV,EAAMP,UAElBiB,QACAA,UAAAA,EAAmBV,KAK/BC,EAAIW,KAAK,MAAOZ,EAAMP,QAAQ,GAC9BQ,EAAIY,mBAGGC,GACPC,OAAOC,QAAQC,UAAU,KAAM,GAAIH,eAG3BI,OACJC,EAAK9B,SAASC,cAAc4B,UAErB,OAAPC,GAAe/B,KAAKF,WACpBkC,QAAQC,IAAIC,UAAkB,0BAA4BJ,EAAW,eAGlEC"}