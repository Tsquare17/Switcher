{"version":3,"file":"XhrContentSwitcher.js","sources":["../src/XhrContentSwitcher.js"],"sourcesContent":["export default class XhrContentSwitcher\n{\n    #className = 'XhrContentSwitcher';\n    #onSwitchCall = null;\n\n    constructor(containerSelector, linkSelector, debugging = false) {\n        this.containerSelector = containerSelector;\n        this.linkSelector = linkSelector;\n        this.debugging = debugging;\n    }\n\n    init() {\n        this.container = this.#getContainer(this.containerSelector);\n\n        document.addEventListener('DOMContentLoaded', () => {\n            document.querySelector('body').addEventListener('click', e => {\n                if (e.target.classList.contains(this.linkSelector.replace('.', ''))) {\n                    e.preventDefault();\n                    this.#replaceEvent(e);\n                }\n            });\n\n            let link = document.querySelector(this.linkSelector);\n            if ((link === null || link.length === 0) && this.debugging) {\n                console.log(this.#className + ': No elements of the class ' + this.linkSelector + ' were found');\n            }\n        });\n    }\n\n    onSwitch(call) {\n        this.#onSwitchCall = call;\n    }\n\n    #getContainer(el) {\n        let container = document.querySelector(el);\n\n        if ((container === null || container.length === 0) && this.debugging) {\n            console.log(this.#className + ': No elements of the class ' + el + ' were found');\n        }\n\n        return container;\n    }\n\n    #replaceEvent(event) {\n        let xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = () => {\n            if (xhr.readyState === XMLHttpRequest.DONE) {\n                let parser = new DOMParser();\n                let doc = parser.parseFromString(xhr.responseText, 'text/html');\n                this.container.innerHTML = doc.querySelector(this.containerSelector).innerHTML;\n\n                this.#updateURL(event.target);\n\n                if (this.#onSwitchCall) {\n                    this.#onSwitchCall(event);\n                }\n            }\n        };\n\n        xhr.open('GET', event.target, true);\n        xhr.send();\n    }\n\n    #updateURL(location) {\n        window.history.pushState(null, '', location);\n    }\n}\n"],"names":["XhrContentSwitcher","containerSelector","linkSelector","debugging","container","this","document","addEventListener","querySelector","e","target","classList","contains","_this","replace","preventDefault","link","length","console","log","_classPrivateFieldGet","call","el","event","xhr","XMLHttpRequest","onreadystatechange","readyState","DONE","doc","DOMParser","parseFromString","responseText","_this2","innerHTML","open","send","location","window","history","pushState"],"mappings":"ynBAAqBA,wBAKLC,EAAmBC,OAAcC,sIAHhC,qDACG,YAGPF,kBAAoBA,OACpBC,aAAeA,OACfC,UAAYA,wEAIZC,YAAYC,eAAAA,KAAmBA,KAAKJ,mBAEzCK,SAASC,iBAAiB,oBAAoB,WAC1CD,SAASE,cAAc,QAAQD,iBAAiB,SAAS,SAAAE,GACjDA,EAAEC,OAAOC,UAAUC,SAASC,EAAKX,aAAaY,QAAQ,IAAK,OAC3DL,EAAEM,mBACFF,YAAAA,EAAmBJ,WAIvBO,EAAOV,SAASE,cAAcK,EAAKX,cACzB,OAATc,GAAiC,IAAhBA,EAAKC,SAAiBJ,EAAKV,WAC7Ce,QAAQC,IAAIC,EAAAP,KAAkB,8BAAgCA,EAAKX,aAAe,mDAKrFmB,+OACgBA,mDAGXC,OACNlB,EAAYE,SAASE,cAAcc,UAEpB,OAAdlB,GAA2C,IAArBA,EAAUa,SAAiBZ,KAAKF,WACvDe,QAAQC,IAAIC,UAAkB,8BAAgCE,EAAK,eAGhElB,cAGGmB,cACNC,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,cACjBF,EAAIG,aAAeF,eAAeG,KAAM,KAEpCC,GADS,IAAIC,WACAC,gBAAgBP,EAAIQ,aAAc,aACnDC,EAAK7B,UAAU8B,UAAYL,EAAIrB,cAAcyB,EAAKhC,mBAAmBiC,YAErED,YAAAA,EAAgBV,EAAMb,UAElBuB,QACAA,UAAAA,EAAmBV,KAK/BC,EAAIW,KAAK,MAAOZ,EAAMb,QAAQ,GAC9Bc,EAAIY,mBAGGC,GACPC,OAAOC,QAAQC,UAAU,KAAM,GAAIH"}